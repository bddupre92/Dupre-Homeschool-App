(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{9320:function(e,r,t){Promise.resolve().then(t.bind(t,2358))},6978:function(e,r,t){"use strict";t.d(r,{P:function(){return withErrorBoundary}});var o=t(7437),s=t(2265),n=t(2720);let DefaultErrorFallback=e=>{let{error:r,resetErrorBoundary:t}=e;return(0,o.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 my-4 max-w-xl mx-auto",children:[(0,o.jsxs)("div",{className:"flex items-center mb-4",children:[(0,o.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-500 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,o.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),(0,o.jsx)("h2",{className:"text-lg font-semibold text-red-800",children:"Something went wrong"})]}),(0,o.jsx)("p",{className:"text-red-700 mb-4",children:"We're sorry, but we encountered an unexpected error. Our team has been notified."}),(0,o.jsxs)("details",{className:"mb-4",children:[(0,o.jsx)("summary",{className:"text-red-700 cursor-pointer",children:"Error details"}),(0,o.jsx)("pre",{className:"mt-2 p-2 bg-red-100 rounded text-red-900 text-sm overflow-auto",children:null==r?void 0:r.toString()})]}),(0,o.jsx)("button",{onClick:t,className:"px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 transition-colors",children:"Try again"})]})},withErrorBoundary=function(e){let{fallback:r,onError:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=e.displayName||e.name||"Component",WrappedComponent=a=>{let[l,i]=s.useState(null),d=r||(0,o.jsx)(DefaultErrorFallback,{error:l,resetErrorBoundary:()=>{i(null)}});return(0,o.jsx)(n.Z,{fallback:d,onError:(e,r)=>{i(e),t&&t(e,r)},children:(0,o.jsx)(e,{...a})})};return WrappedComponent.displayName="withErrorBoundary(".concat(a,")"),WrappedComponent};r.Z=DefaultErrorFallback},2358:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return Home}});var o=t(7437),s=t(2265),n=t(6978),a=t(5252),l=t(1045),i=t(9878),d=t(9498),u=t(2496),c=t(8153),h=t(9043);let p=u.Z.create({container:{backgroundColor:"white",borderRadius:12,padding:24,width:"100%",maxWidth:500,shadowColor:"#000",shadowOffset:{width:0,height:2},shadowOpacity:.1,shadowRadius:4,elevation:3},title:{fontSize:24,fontWeight:"bold",marginBottom:24,textAlign:"center"},errorContainer:{backgroundColor:"#fee2e2",borderRadius:8,padding:12,marginBottom:16},errorText:{color:"#b91c1c",fontSize:14},successContainer:{backgroundColor:"#ecfdf5",borderRadius:8,padding:12,marginBottom:16},successText:{color:"#065f46",fontSize:14},formGroup:{marginBottom:16},label:{fontSize:16,fontWeight:"bold",marginBottom:8},input:{borderWidth:1,borderColor:"#ddd",borderRadius:8,padding:12,fontSize:16},inputError:{borderColor:"#ef4444"},fieldError:{color:"#ef4444",fontSize:14,marginTop:4},passwordSection:{marginTop:16,marginBottom:16,paddingTop:16,borderTopWidth:1,borderTopColor:"#eee"},sectionTitle:{fontSize:18,fontWeight:"bold",marginBottom:16},button:{backgroundColor:"#4f46e5",borderRadius:8,padding:16,alignItems:"center",marginTop:8},buttonDisabled:{backgroundColor:"#a5a5a5"},buttonText:{color:"white",fontSize:16,fontWeight:"bold"}});function Home(){return(0,o.jsxs)("div",{style:{padding:"20px",maxWidth:"800px",margin:"0 auto",fontFamily:"system-ui, sans-serif"},children:[(0,o.jsx)("h1",{style:{color:"#333"},children:"Homeschool App"}),(0,o.jsx)("p",{style:{fontSize:"18px"},children:"Welcome to your homeschool planning application!"}),(0,o.jsxs)("div",{style:{marginTop:"20px",padding:"20px",border:"1px solid #eee",borderRadius:"8px"},children:[(0,o.jsx)("p",{children:"You must be logged in to view personalized content."}),(0,o.jsx)("button",{style:{background:"#0070f3",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer"},children:"Sign In"})]})]})}(0,n.P)(e=>{let{onSuccess:r}=e,{user:t}=(0,h.a)(),[n,u]=(0,s.useState)((null==t?void 0:t.displayName)||""),[m,x]=(0,s.useState)((null==t?void 0:t.email)||""),[g,f]=(0,s.useState)(""),[y,b]=(0,s.useState)(""),[w,j]=(0,s.useState)(""),[E,v]=(0,s.useState)(!1),[C,Z]=(0,s.useState)(null),[S,k]=(0,s.useState)(null),[P,T]=(0,s.useState)({});(0,s.useEffect)(()=>{t&&(u(t.displayName||""),x(t.email||""))},[t]);let validateForm=()=>{let e={};return n.trim()||(e.displayName="Display name is required"),m.trim()?/\S+@\S+\.\S+/.test(m)||(e.email="Email is invalid"):e.email="Email is required",y&&(g||(e.currentPassword="Current password is required to set a new password"),y.length<6&&(e.newPassword="Password must be at least 6 characters"),y!==w&&(e.confirmPassword="Passwords do not match")),m===(null==t?void 0:t.email)||g||(e.currentPassword="Current password is required to change email"),T(e),0===Object.keys(e).length},handleUpdateProfile=async()=>{if(validateForm()&&t)try{if(v(!0),Z(null),k(null),(m!==t.email||y)&&g){let e=c.w9.credential(t.email||"",g);await (0,c.aF)(t,e)}n!==t.displayName&&await (0,c.ck)(t,{displayName:n}),m!==t.email&&await (0,c.s)(t,m),y&&await (0,c.gQ)(t,y),k("Profile updated successfully!"),f(""),b(""),j(""),r()}catch(e){console.error("Error updating profile:",e),"auth/requires-recent-login"===e.code?Z("For security reasons, please log out and log back in to make these changes."):"auth/email-already-in-use"===e.code?Z("This email is already in use by another account."):"auth/invalid-email"===e.code?Z("The email address is not valid."):"auth/weak-password"===e.code?Z("The password is too weak."):"auth/wrong-password"===e.code?Z("The current password is incorrect."):Z("Failed to update profile. Please try again later.")}finally{v(!1)}};return t?(0,o.jsxs)(a.Z,{style:p.container,children:[(0,o.jsx)(l.Z,{style:p.title,children:"Edit Profile"}),C&&(0,o.jsx)(a.Z,{style:p.errorContainer,children:(0,o.jsx)(l.Z,{style:p.errorText,children:C})}),S&&(0,o.jsx)(a.Z,{style:p.successContainer,children:(0,o.jsx)(l.Z,{style:p.successText,children:S})}),(0,o.jsxs)(a.Z,{style:p.formGroup,children:[(0,o.jsx)(l.Z,{style:p.label,children:"Display Name"}),(0,o.jsx)(i.Z,{style:[p.input,P.displayName&&p.inputError],value:n,onChangeText:u,placeholder:"Enter your display name",autoCapitalize:"words"}),P.displayName&&(0,o.jsx)(l.Z,{style:p.fieldError,children:P.displayName})]}),(0,o.jsxs)(a.Z,{style:p.formGroup,children:[(0,o.jsx)(l.Z,{style:p.label,children:"Email"}),(0,o.jsx)(i.Z,{style:[p.input,P.email&&p.inputError],value:m,onChangeText:x,placeholder:"Enter your email",keyboardType:"email-address",autoCapitalize:"none"}),P.email&&(0,o.jsx)(l.Z,{style:p.fieldError,children:P.email})]}),(0,o.jsxs)(a.Z,{style:p.passwordSection,children:[(0,o.jsx)(l.Z,{style:p.sectionTitle,children:"Change Password"}),(0,o.jsxs)(a.Z,{style:p.formGroup,children:[(0,o.jsx)(l.Z,{style:p.label,children:"Current Password"}),(0,o.jsx)(i.Z,{style:[p.input,P.currentPassword&&p.inputError],value:g,onChangeText:f,placeholder:"Enter your current password",secureTextEntry:!0}),P.currentPassword&&(0,o.jsx)(l.Z,{style:p.fieldError,children:P.currentPassword})]}),(0,o.jsxs)(a.Z,{style:p.formGroup,children:[(0,o.jsx)(l.Z,{style:p.label,children:"New Password"}),(0,o.jsx)(i.Z,{style:[p.input,P.newPassword&&p.inputError],value:y,onChangeText:b,placeholder:"Enter new password",secureTextEntry:!0}),P.newPassword&&(0,o.jsx)(l.Z,{style:p.fieldError,children:P.newPassword})]}),(0,o.jsxs)(a.Z,{style:p.formGroup,children:[(0,o.jsx)(l.Z,{style:p.label,children:"Confirm New Password"}),(0,o.jsx)(i.Z,{style:[p.input,P.confirmPassword&&p.inputError],value:w,onChangeText:j,placeholder:"Confirm new password",secureTextEntry:!0}),P.confirmPassword&&(0,o.jsx)(l.Z,{style:p.fieldError,children:P.confirmPassword})]})]}),(0,o.jsx)(d.Z,{style:[p.button,E&&p.buttonDisabled],onPress:handleUpdateProfile,disabled:E,children:(0,o.jsx)(l.Z,{style:p.buttonText,children:E?"Updating...":"Update Profile"})})]}):(0,o.jsx)(a.Z,{style:p.container,children:(0,o.jsx)(l.Z,{children:"You must be logged in to view this page."})})},{onError:(e,r)=>{console.error("Error in ProfileForm component:",e,r)}})},9043:function(e,r,t){"use strict";let o,s;t.d(r,{H:function(){return AuthProvider},a:function(){return useAuth}});var n=t(7437),a=t(2265),l=t(8153),i=t(994),d=t(9365),u=t(9584),c=t(2601);let h={apiKey:"AIzaSyBNDddgbmDgDjG4K-FuFjkM6FMCB9_zGLk",authDomain:"dupre-homeschool-app.firebaseapp.com",projectId:"dupre-homeschool-app",storageBucket:"dupre-homeschool-app.firebasestorage.app",messagingSenderId:"283384305539",appId:"1:283384305539:web:54981e950614530d5e08b6",measurementId:c.env.NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID};(0,i.C6)().length||(o=(0,i.ZF)(h),(0,d.Gb)().then(e=>{e&&(0,d.IH)(o)}),s=(0,l.v0)(o),(0,u.cF)(o));let p=(0,a.createContext)({user:null,loading:!0,signOut:async()=>{}}),useAuth=()=>(0,a.useContext)(p),AuthProvider=e=>{let{children:r}=e,[t,o]=(0,a.useState)(null),[i,d]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,l.Aj)(s,e=>{o(e),d(!1)});return()=>e()},[]);let signOut=async()=>{try{await (0,l.w7)(s)}catch(e){console.error("Error signing out:",e)}};return(0,n.jsx)(p.Provider,{value:{user:t,loading:i,signOut},children:r})}},2720:function(e,r,t){"use strict";var o=t(7437);t(2265);var s=t(4740);function DefaultErrorFallback(e){let{error:r,resetErrorBoundary:t}=e;return(0,o.jsxs)("div",{role:"alert",className:"error-boundary-fallback",children:[(0,o.jsx)("h2",{children:"Something went wrong."}),(0,o.jsxs)("details",{children:[(0,o.jsx)("summary",{children:"Error details"}),(0,o.jsx)("pre",{children:r.message})]}),(0,o.jsx)("button",{onClick:t,className:"error-boundary-retry-button",children:"Try again"})]})}r.Z=e=>{let{children:r,onError:t=(e,r)=>{console.error("Caught error:",e,r)},fallback:n}=e;return(0,o.jsx)(s.SV,{fallbackRender:e=>{let{error:r,resetErrorBoundary:t}=e;return n?(0,o.jsx)(o.Fragment,{children:n}):(0,o.jsx)(DefaultErrorFallback,{error:r,resetErrorBoundary:t})},onError:t,children:r})}}},function(e){e.O(0,[109,912,721,971,472,744],function(){return e(e.s=9320)}),_N_E=e.O()}]);